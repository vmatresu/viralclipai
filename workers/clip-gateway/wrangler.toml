# Clip Gateway Worker
# Deploy: cd workers/clip-gateway && wrangler deploy

name = "viralclipai-prod-clip-gateway"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Custom domain routes
routes = [
  { pattern = "clips.viralclipai.io/*", zone_name = "viralclipai.io" }
]

# R2 bucket binding
[[r2_buckets]]
binding = "CLIPS_BUCKET"
bucket_name = "viralclipai-storage"

# Environment variables (set via wrangler secret)
# SIGNING_SECRET - HMAC signing secret (must match backend)

[vars]
# Default CORS origins (comma-separated)
ALLOWED_ORIGINS = "https://www.viralclipai.io,https://viralclipai.io,https://clips.viralclipai.io"
