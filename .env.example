# =============================================================================
# ViralClip AI - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Rust Runtime Configuration
# -----------------------------------------------------------------------------
RUST_LOG=info
RUST_BACKTRACE=1

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
ENVIRONMENT=production
API_PORT=8000
WORKER_CONCURRENCY=4

# -----------------------------------------------------------------------------
# Firebase/Firestore Configuration
# -----------------------------------------------------------------------------
# Get these from Firebase Console -> Project Settings -> Service Accounts
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour-Private-Key-Here\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com

# Firestore Client Tuning (optional, sensible defaults)
# FIRESTORE_CONNECT_TIMEOUT_SECS=5   # TCP connect timeout
# FIRESTORE_RETRY_BASE_MS=100        # Base delay for exponential backoff
# FIRESTORE_RETRY_MAX_MS=5000        # Maximum retry delay

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
# Generate a secure random string for production
# Example: openssl rand -base64 64
JWT_SECRET=your-secure-jwt-secret-change-in-production

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Internal Docker network uses redis://redis:6379
# For external access, use redis://localhost:6379
REDIS_URL=redis://redis:6379
REDIS_POOL_SIZE=10

# Redis password for production security
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=your-secure-redis-password

# -----------------------------------------------------------------------------
# Cloudflare R2 Storage Configuration
# -----------------------------------------------------------------------------
# Get these from Cloudflare Dashboard -> R2 -> Manage R2 API Tokens

# R2 Jurisdiction-Specific Endpoint (REQUIRED)
# Format: https://{account-id}.r2.cloudflarestorage.com
# Find this in R2 Dashboard -> Bucket Settings -> Jurisdiction-specific endpoints
R2_ENDPOINT_URL=https://your-account-id.r2.cloudflarestorage.com

# R2 Credentials
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=your-bucket-name

# Optional: R2 Region (default: "auto")
R2_REGION=auto
R2_PUBLIC_URL=https://cdn.yourdomain.com

# -----------------------------------------------------------------------------
# Gemini AI Configuration
# -----------------------------------------------------------------------------
# Get this from Google AI Studio: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key

# -----------------------------------------------------------------------------
# Optional: Resource Limits (uncomment to override defaults)
# -----------------------------------------------------------------------------
# API_CPU_LIMIT=2
# API_MEMORY_LIMIT=2G
# WORKER_CPU_LIMIT=4
# WORKER_MEMORY_LIMIT=4G
# REDIS_MEMORY_LIMIT=512M

# -----------------------------------------------------------------------------
# Video Delivery Layer Configuration
# -----------------------------------------------------------------------------
# Cloudflare Worker URL for Worker-fronted delivery (optional)
# If set, enables secure token-based video delivery via Cloudflare Workers
# Format: https://your-worker-domain.com
CDN_WORKER_URL=https://clips.viralclipai.io

# HMAC-SHA256 signing secret for delivery tokens (REQUIRED for Worker delivery)
# Generate with: openssl rand -base64 32
# Must match the SIGNING_SECRET in your Cloudflare Worker
DELIVERY_SIGNING_SECRET=your-32-byte-delivery-signing-secret

# Whether to prefer Worker-fronted delivery over direct presigned URLs
# Defaults to true when CDN_WORKER_URL and DELIVERY_SIGNING_SECRET are both set
# Set to false to force presigned URL delivery even when Worker is configured
# PREFER_WORKER_DELIVERY=false

# URL expiry times in seconds (for both Worker and presigned URL delivery)
PLAYBACK_URL_EXPIRY_SECS=900      # 15 minutes for playback
DOWNLOAD_URL_EXPIRY_SECS=300      # 5 minutes for downloads

# Public app URL for share link generation
# Used to construct share URLs like https://www.viralclipai.io/c/{share_slug}
PUBLIC_APP_URL=https://www.viralclipai.io

# -----------------------------------------------------------------------------
# TikTok Integration (optional)
# -----------------------------------------------------------------------------
# TikTok API base URL for publishing clips (when implemented)
TIKTOK_API_BASE_URL=https://your-tiktok-upload-endpoint
